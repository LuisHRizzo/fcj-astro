---
import { getTrans } from "../../i18n/utils";

type Props = {
  lang: string;
  dict: any;
  regionKeys?: { labelLatam: string; labelEU: string };
};

const { dict, regionKeys } = Astro.props as Props;
const t = (k: string, fb?: string) => getTrans(dict, k, fb);
---

<section class="py-12 md:py-16" data-region-root>
  <div class="container mx-auto max-w-7xl px-4">
    <p class="text-sm font-semibold text-neutral-500">{t("solutions.value.overline", "Propuesta de valor")}</p>
    <h2 class="mt-2 text-3xl sm:text-4xl font-extrabold tracking-tight">{t("solutions.value.title", "Cumplimiento, eficiencia y transparencia")}</h2>
    <p class="mt-3 max-w-3xl text-neutral-700">{t("solutions.value.lead", "Servicios que resuelven retos de transformación digital, compliance multinormativo, transparencia y automatización.")}</p>

    <!-- Region toggle -->
    <div class="mt-6 inline-flex gap-2 rounded-full border p-1">
      <button type="button" data-region="latam" class="px-4 py-1.5 text-sm rounded-full bg-neutral-900 text-white">
        {t(regionKeys?.labelLatam ?? "region.latam", "Latam")}
      </button>
      <button type="button" data-region="eu" class="px-4 py-1.5 text-sm rounded-full hover:bg-neutral-100">
        {t(regionKeys?.labelEU ?? "region.eu", "UE")}
      </button>
    </div>

    <div class="mt-8 grid gap-6 md:grid-cols-3">
      <!-- Compliance -->
      <article class="card p-5">
        <h3 class="text-lg font-bold">{t("solutions.value.compliance.title", "Compliance multinormativo")}</h3>
        <p class="mt-2 text-sm text-neutral-600" data-region-latam>{t("solutions.value.compliance.latam", "Alineado a ISO, Leyes de Acceso a la Información, modelos locales de gobierno abierto y normativas sectoriales LATAM.")}</p>
        <p class="mt-2 text-sm text-neutral-600 hidden" data-region-eu>{t("solutions.value.compliance.eu", "Alineado a ISO/IEC, ENS, GDPR y marcos europeos de administración pública digital.")}</p>
      </article>

      <!-- Automatización -->
      <article class="card p-5">
        <h3 class="text-lg font-bold">{t("solutions.value.automation.title", "Automatización inteligente")}</h3>
        <p class="mt-2 text-sm text-neutral-600">{t("solutions.value.automation.desc", "Bots, workflows y asistentes de IA que reducen tiempos y errores operativos con trazabilidad y auditoría.")}</p>
      </article>

      <!-- Soporte -->
      <article class="card p-5">
        <h3 class="text-lg font-bold">{t("solutions.value.support.title", "Soporte continuo y modularidad")}</h3>
        <p class="mt-2 text-sm text-neutral-600">{t("solutions.value.support.desc", "Implementación escalable, acompañamiento post–lanzamiento y transferencia de conocimiento a equipos internos.")}</p>
      </article>
    </div>
  </div>

  <script is:inline>
    (() => {
      const root = document.currentScript?.closest('[data-region-root]');
      if (!root) return;
      const btns = root.querySelectorAll('[data-region]');
      const show = (key) => {
        root.querySelectorAll('[data-region-latam]').forEach(el => el.classList.toggle('hidden', key !== 'latam'));
        root.querySelectorAll('[data-region-eu]').forEach(el => el.classList.toggle('hidden', key !== 'eu'));
        btns.forEach(b => {
          const active = b.getAttribute('data-region') === key;
          b.classList.toggle('bg-neutral-900', active);
          b.classList.toggle('text-white', active);
          b.classList.toggle('hover:bg-neutral-100', !active);
        });
      };
      btns.forEach(b => b.addEventListener('click', () => show(b.getAttribute('data-region'))));
      show('latam');
    })();
  </script>
</section>
